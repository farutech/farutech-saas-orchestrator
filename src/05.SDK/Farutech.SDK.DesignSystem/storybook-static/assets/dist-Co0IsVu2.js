import{o as e}from"./iframe-D4gg6Iw3.js";import{t}from"./react-uv-Ghkqr.js";import{t as n}from"./jsx-runtime-DNZ2e1fB.js";import{n as r}from"./dist-Cp-7oqJL.js";import{n as i,r as a,t as o}from"./dist-lQwzu1EI.js";import{t as s}from"./dist-d7e7dHBK.js";var c=e(t(),1);function l(e,t=globalThis?.document){let n=s(e);c.useEffect(()=>{let e=e=>{e.key===`Escape`&&n(e)};return t.addEventListener(`keydown`,e,{capture:!0}),()=>t.removeEventListener(`keydown`,e,{capture:!0})},[n,t])}var u=n(),d=`DismissableLayer`,f=`dismissableLayer.update`,p=`dismissableLayer.pointerDownOutside`,m=`dismissableLayer.focusOutside`,h,g=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_=c.forwardRef((e,t)=>{let{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:d,onInteractOutside:p,onDismiss:m,..._}=e,v=c.useContext(g),[y,C]=c.useState(null),w=y?.ownerDocument??globalThis?.document,[,T]=c.useState({}),E=r(t,e=>C(e)),D=Array.from(v.layers),[O]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),k=D.indexOf(O),A=y?D.indexOf(y):-1,j=v.layersWithOutsidePointerEventsDisabled.size>0,M=A>=k,N=b(e=>{let t=e.target,n=[...v.branches].some(e=>e.contains(t));!M||n||(s?.(e),p?.(e),e.defaultPrevented||m?.())},w),P=x(e=>{let t=e.target;[...v.branches].some(e=>e.contains(t))||(d?.(e),p?.(e),e.defaultPrevented||m?.())},w);return l(e=>{A===v.layers.size-1&&(i?.(e),!e.defaultPrevented&&m&&(e.preventDefault(),m()))},w),c.useEffect(()=>{if(y)return n&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(h=w.body.style.pointerEvents,w.body.style.pointerEvents=`none`),v.layersWithOutsidePointerEventsDisabled.add(y)),v.layers.add(y),S(),()=>{n&&v.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=h)}},[y,w,n,v]),c.useEffect(()=>()=>{y&&(v.layers.delete(y),v.layersWithOutsidePointerEventsDisabled.delete(y),S())},[y,v]),c.useEffect(()=>{let e=()=>T({});return document.addEventListener(f,e),()=>document.removeEventListener(f,e)},[]),(0,u.jsx)(o.div,{..._,ref:E,style:{pointerEvents:j?M?`auto`:`none`:void 0,...e.style},onFocusCapture:a(e.onFocusCapture,P.onFocusCapture),onBlurCapture:a(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:a(e.onPointerDownCapture,N.onPointerDownCapture)})});_.displayName=d;var v=`DismissableLayerBranch`,y=c.forwardRef((e,t)=>{let n=c.useContext(g),i=c.useRef(null),a=r(t,i);return c.useEffect(()=>{let e=i.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,u.jsx)(o.div,{...e,ref:a})});y.displayName=v;function b(e,t=globalThis?.document){let n=s(e),r=c.useRef(!1),i=c.useRef(()=>{});return c.useEffect(()=>{let e=e=>{if(e.target&&!r.current){let r=function(){C(p,n,a,{discrete:!0})},a={originalEvent:e};e.pointerType===`touch`?(t.removeEventListener(`click`,i.current),i.current=r,t.addEventListener(`click`,i.current,{once:!0})):r()}else t.removeEventListener(`click`,i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener(`pointerdown`,e)},0);return()=>{window.clearTimeout(a),t.removeEventListener(`pointerdown`,e),t.removeEventListener(`click`,i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function x(e,t=globalThis?.document){let n=s(e),r=c.useRef(!1);return c.useEffect(()=>{let e=e=>{e.target&&!r.current&&C(m,n,{originalEvent:e},{discrete:!1})};return t.addEventListener(`focusin`,e),()=>t.removeEventListener(`focusin`,e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function S(){let e=new CustomEvent(f);document.dispatchEvent(e)}function C(e,t,n,{discrete:r}){let a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?i(a,o):a.dispatchEvent(o)}var w=_,T=y;export{_ as n,w as r,T as t};